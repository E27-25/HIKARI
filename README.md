<!-- âœ¿ HIKARI - Healthcare-oriented Intelligent Knowledge-Augmented Retrieval and Inference system âœ¿ -->

<div align="center">

<!-- ğŸŒ¸ Logo ğŸŒ¸ -->
<img src="logo/HIKARI logo.png" alt="HIKARI Logo" width="800"/>

<br/>

<!-- âœ¿ Sakura Divider âœ¿ -->
```
âœ¿ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” âœ¿
```

### ğŸŒ¸ *A Three-Stage Vision-Language Model for Multilingual Oral Lesion Diagnosis with Retrieval-Augmented Visual Grounding and Evidence-Based Clinical Recommendations* ğŸŒ¸

<br/>

<!-- âœ¿ Badges âœ¿ -->
![Python](https://img.shields.io/badge/Python-3.10+-FFB7C5?style=for-the-badge&logo=python&logoColor=white)
![PyTorch](https://img.shields.io/badge/PyTorch-2.0+-FADADD?style=for-the-badge&logo=pytorch&logoColor=white)
![License](https://img.shields.io/badge/License-MIT-FFE4E9?style=for-the-badge)
![Status](https://img.shields.io/badge/Status-In%20Development-F8C8DC?style=for-the-badge)

<br/>

```
                    ğŸŒ¸                          ğŸŒ¸                          ğŸŒ¸
              âœ¿           âœ¿              âœ¿           âœ¿              âœ¿           âœ¿
                    ğŸŒ¸                          ğŸŒ¸                          ğŸŒ¸
```

</div>

<!-- âœ¿ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” âœ¿ -->

## ğŸŒ¸ About HIKARI

<div align="center">

| | |
|:---:|:---|
| **H** | **H**ealthcare-oriented |
| **I** | **I**ntelligent |
| **K** | **K**nowledge-Augmented |
| **A** | |
| **R** | **R**etrieval and |
| **I** | **I**nference system |

</div>

```
âœ¿ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” âœ¿
```

<div align="center">

## ğŸŒ¸ Training Pipeline ğŸŒ¸

</div>

### âœ¿ Data Preparation (Week 1-2)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŒ¸ DATA PREPARATION (Week 1-2)                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚  Thai Oral Images (500-1000)          Claude API                                   â”‚
â”‚  + Segmentation Masks        â”€â”€â”€â”€â”€â”€â”€â”€â–º  Caption Generation                         â”‚
â”‚  + Disease Labels                      (Thai + English)                            â”‚
â”‚                                              â”‚                                      â”‚
â”‚                                              â–¼                                      â”‚
â”‚                                     Complex Instructions                           â”‚
â”‚                                     Generator (Claude)                             â”‚
â”‚                                              â”‚                                      â”‚
â”‚                                              â–¼                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  5 Types of Complex Instructions (Thai + English)                    â”‚        â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚
â”‚  â”‚  1. Multi-granular:    "lesion" â†’ "white patch" â†’ "OLK on buccal"   â”‚        â”‚
â”‚  â”‚  2. Multi-object:      "Segment all erosive areas"                   â”‚        â”‚
â”‚  â”‚  3. Hallucination:     "Segment melanoma" â†’ Model rejects            â”‚        â”‚
â”‚  â”‚  4. Reasoning:         "Which lesions need biopsy?"                  â”‚        â”‚
â”‚  â”‚  5. Part-level:        "Segment erythematous borders"                â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                              â”‚                                      â”‚
â”‚                                              â–¼                                      â”‚
â”‚                                   Training Dataset Ready                           â”‚
â”‚                                   (~10K instruction pairs)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

<br/>

### âœ¿ Stage 1: Classification Training (Week 3)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŒ¸ STAGE 1: CLASSIFICATION TRAINING (Week 3)                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚  Input Image â”€â”€â”€â”€â”€â”€â”€â–º  Vision Encoder  â”€â”€â”€â”€â”€â”€â”                                     â”‚
â”‚  (Thai/Eng)           (CLIP-ViT)             â”‚                                     â”‚
â”‚                                               â”‚                                     â”‚
â”‚                                               â”œâ”€â”€â”€â”€â”€â–º Aligner â”€â”€â”€â–º LLM â”€â”€â”€â–º Output â”‚
â”‚  Simple Prompt â”€â”€â”€â”€â”€â–º Tokenizer &            â”‚       Module      (Qwen)    Binary  â”‚
â”‚  "Is this OLK?"       Embedding â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             (Yes/No)â”‚
â”‚                                                                                      â”‚
â”‚  Training: 10 epochs, Binary Classification                                        â”‚
â”‚  Weights: Frozen Vision Encoder + LoRA on LLM                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

<br/>

### âœ¿ Stage 2: Complex Grounding Training (Week 3-4)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŒ¸ STAGE 2: COMPLEX GROUNDING TRAINING (Week 3-4)                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚  Input Image â”€â”€â”€â”€â”€â”€â”€â–º  Vision Encoder  â”€â”€â”€â”€â”€â”€â”                                     â”‚
â”‚  (Thai/Eng)           (from Stage 1)         â”‚                                     â”‚
â”‚                                               â”‚                                     â”‚
â”‚                                               â”œâ”€â”€â”€â”€â”€â–º Aligner â”€â”€â”€â–º LLM             â”‚
â”‚  Complex Prompt â”€â”€â”€â–º Tokenizer &             â”‚       Module      (from Stage 1)   â”‚
â”‚  "Segment erosive     Embedding â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚            â”‚
â”‚   areas with high                                                     â”‚            â”‚
â”‚   malignancy risk"                                                    â–¼            â”‚
â”‚                                                               Segmentation Token   â”‚
â”‚                                                                  <seg1>, <seg2>    â”‚
â”‚                                                                        â”‚            â”‚
â”‚                                                                        â–¼            â”‚
â”‚                                                                  SAM Decoder        â”‚
â”‚                                                                        â”‚            â”‚
â”‚                                                                        â–¼            â”‚
â”‚                                                               Segmentation Masks    â”‚
â”‚                                                               (Polygon Coords)      â”‚
â”‚                                                                                      â”‚
â”‚  Training: 5 epochs, Ground-V style 5 challenges                                   â”‚
â”‚  Loss: IoU Loss + Cross-Entropy                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

<br/>

### âœ¿ Stage 3: Captioning Training (Week 4)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŒ¸ STAGE 3: CAPTIONING TRAINING (Week 4)                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚  Input Image â”€â”€â”€â”€â”€â”€â”€â–º  Vision Encoder  â”€â”€â”€â”€â”€â”€â”                                     â”‚
â”‚  (Thai/Eng)           (from Stage 2)         â”‚                                     â”‚
â”‚                                               â”‚                                     â”‚
â”‚                                               â”œâ”€â”€â”€â”€â”€â–º Aligner â”€â”€â”€â–º LLM             â”‚
â”‚  Caption Prompt â”€â”€â”€â–º Tokenizer &             â”‚       Module      (from Stage 2)   â”‚
â”‚  "Please describe     Embedding â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚            â”‚
â”‚   the symptoms                                                        â–¼            â”‚
â”‚   shown in image"                                                LLM Decoder       â”‚
â”‚                                                                        â”‚            â”‚
â”‚                                                                        â–¼            â”‚
â”‚                                                               Clinical Caption      â”‚
â”‚                                                               (Thai/English text)   â”‚
â”‚                                                                                      â”‚
â”‚  Training: 5 epochs, Caption generation                                            â”‚
â”‚  Loss: Cross-Entropy (next token prediction)                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

<br/>

```
      ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸
```

<br/>

<div align="center">

## ğŸŒ¸ ReGrounding Module Development ğŸŒ¸

</div>

### âœ¿ Building Knowledge Base (Week 4)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŒ¸ BUILDING KNOWLEDGE BASE (Week 4)                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚  Training Cases â”€â”€â”€â”€â”€â”€â–º Vision Encoder â”€â”€â”€â”€â”€â”€â”€â”€â–º Image Features                    â”‚
â”‚  (Images + Masks)      (CLIP/DINOv2)                  â”‚                            â”‚
â”‚                                                        â”‚                            â”‚
â”‚                                                        â”œâ”€â”€â”€â”€â–º Vector Database       â”‚
â”‚  Segmentation â”€â”€â”€â”€â”€â”€â”€â–º Mask Encoder â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Mask Features  (FAISS Index)      â”‚
â”‚  Masks                                                 â”‚                            â”‚
â”‚                                                        â”‚                            â”‚
â”‚  Clinical Text â”€â”€â”€â”€â”€â”€â–º Text Encoder â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Text Features                     â”‚
â”‚  (Captions +           (BioBERT)                       â”‚                            â”‚
â”‚   Guidelines)                                          â”‚                            â”‚
â”‚                                                        â”‚                            â”‚
â”‚  Treatment â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â–º Metadata             â”‚
â”‚  Outcomes                                                     (Disease, Outcome,    â”‚
â”‚                                                                Treatment, etc.)     â”‚
â”‚                                                                                      â”‚
â”‚  Result: Knowledge Base with ~1000+ indexed cases                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

<br/>

```
      ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸
```

<br/>

<div align="center">

## ğŸŒ¸ Inference Pipeline ğŸŒ¸

</div>

### âœ¿ User Input (via Web or LINE API)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŒ¸ USER INPUT (via Web or LINE API)                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚  Patient Image â”€â”€â”€â”€â”€â”€â”€â”€â”                                                            â”‚
â”‚  (Oral Photo)          â”‚                                                            â”‚
â”‚                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  User Instruction â”€â”€â”€â”€â”€â”¤                                              â”‚            â”‚
â”‚  (Thai or English)     â”‚                                              â”‚            â”‚
â”‚  e.g., "Segment areas  â”‚                                              â”‚            â”‚
â”‚   requiring treatment" â”‚                                              â”‚            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

<br/>

### âœ¿ Step 1: Initial Prediction

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŒ¸ STEP 1: INITIAL PREDICTION (Trained Model from Stage 1-3)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚  Image + Instruction â”€â”€â”€â”€â–º OralGPT Model â”€â”€â”€â”€â”€â–º Initial Results                    â”‚
â”‚                            (Stage 1-2-3)              â”‚                             â”‚
â”‚                                                       â”œâ”€â”€â–º Disease Classification    â”‚
â”‚                                                       â”œâ”€â”€â–º Segmentation Masks        â”‚
â”‚                                                       â”œâ”€â”€â–º Clinical Caption          â”‚
â”‚                                                       â””â”€â”€â–º Uncertainty Score         â”‚
â”‚                                                              â”‚                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

<br/>

### âœ¿ Step 2: Uncertainty Estimation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŒ¸ STEP 2: UNCERTAINTY ESTIMATION (Monte Carlo Dropout)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚  Multiple Forward Passes â”€â”€â”€â”€â–º Statistical Analysis â”€â”€â”€â”€â–º Uncertainty Score        â”‚
â”‚  (with dropout enabled)         (variance calculation)         â”‚                   â”‚
â”‚                                                                 â”‚                   â”‚
â”‚                                                                 â–¼                   â”‚
â”‚                                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚                                                    â”‚ If Uncertainty > 0.7   â”‚      â”‚
â”‚                                                    â”‚ â†’ Retrieve more cases  â”‚      â”‚
â”‚                                                    â”‚    (k=10)              â”‚      â”‚
â”‚                                                    â”‚ Else                   â”‚      â”‚
â”‚                                                    â”‚ â†’ Retrieve fewer (k=3) â”‚      â”‚
â”‚                                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                 â”‚                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

<br/>

### âœ¿ Step 3: Visual-Semantic Retrieval (ReGrounding)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŒ¸ STEP 3: VISUAL-SEMANTIC RETRIEVAL (ReGrounding)                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚  Query Encoding:                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚  Patient Image â”€â”€â”€â”€â–º Vision Encoder â”€â”€â”€â”€â–º Image Features        â”‚              â”‚
â”‚  â”‚                                                  â”‚                â”‚              â”‚
â”‚  â”‚  Predicted Masks â”€â”€â–º Mask Encoder â”€â”€â”€â”€â”€â”€â–º Mask Features         â”‚              â”‚
â”‚  â”‚                                                  â”‚                â”‚              â”‚
â”‚  â”‚  Instruction â”€â”€â”€â”€â”€â”€â–º Text Encoder â”€â”€â”€â”€â”€â”€â–º Text Features          â”‚              â”‚
â”‚  â”‚                                                  â”‚                â”‚              â”‚
â”‚  â”‚                                                  â–¼                â”‚              â”‚
â”‚  â”‚                                        Combined Query Vector      â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                  â”‚                                  â”‚
â”‚                                                  â–¼                                  â”‚
â”‚  Similarity Search:                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚  Query Vector â”€â”€â”€â”€â”€â”€â–º Vector Database (FAISS) â”€â”€â–º Top-k Cases  â”‚              â”‚
â”‚  â”‚                                                           â”‚       â”‚              â”‚
â”‚  â”‚                                                           â–¼       â”‚              â”‚
â”‚  â”‚                              Retrieved Cases with:                â”‚              â”‚
â”‚  â”‚                              â€¢ Similar images                     â”‚              â”‚
â”‚  â”‚                              â€¢ Segmentation masks                 â”‚              â”‚
â”‚  â”‚                              â€¢ Disease diagnosis                  â”‚              â”‚
â”‚  â”‚                              â€¢ Treatment used                     â”‚              â”‚
â”‚  â”‚                              â€¢ Clinical outcomes                  â”‚              â”‚
â”‚  â”‚                              â€¢ Follow-up duration                 â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                  â”‚                                  â”‚
â”‚                                                  â–¼                                  â”‚
â”‚  Cross-Modal Re-ranking:                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚  For each retrieved case:                                        â”‚              â”‚
â”‚  â”‚    Score = Î± Ã— Visual_Similarity                                 â”‚              â”‚
â”‚  â”‚          + (1-Î±) Ã— Semantic_Similarity                           â”‚              â”‚
â”‚  â”‚          + 0.2 Ã— Language_Match_Bonus                            â”‚              â”‚
â”‚  â”‚                                                                   â”‚              â”‚
â”‚  â”‚  Î± = 0.7 if uncertainty > 0.5, else 0.3 (adaptive weighting)    â”‚              â”‚
â”‚  â”‚                                                                   â”‚              â”‚
â”‚  â”‚  Sort by final score â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Top-k Ranked Cases         â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                  â”‚                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

<br/>

### âœ¿ Step 4: Evidence-Based Suggestion Generation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŒ¸ STEP 4: EVIDENCE-BASED SUGGESTION GENERATION                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚  Build Context from Retrieved Cases:                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚  For each retrieved case i:                                      â”‚              â”‚
â”‚  â”‚    â€¢ Image_i + Segmentation_i (visual template)                  â”‚              â”‚
â”‚  â”‚    â€¢ Description_i (clinical narrative)                          â”‚              â”‚
â”‚  â”‚    â€¢ Treatment_i (what was done)                                 â”‚              â”‚
â”‚  â”‚    â€¢ Outcome_i (result: improved/stable/worsened)                â”‚              â”‚
â”‚  â”‚    â€¢ Similarity_Score_i                                          â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                          â”‚                                                          â”‚
â”‚                          â–¼                                                          â”‚
â”‚  Aggregate Evidence:                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚  â€¢ Successful treatments: 12/15 cases improved with Treatment X  â”‚              â”‚
â”‚  â”‚  â€¢ Average follow-up: 6 months                                   â”‚              â”‚
â”‚  â”‚  â€¢ Complication rate: 2/15 cases                                 â”‚              â”‚
â”‚  â”‚  â€¢ Evidence strength: 12/15 = 80%                                â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                          â”‚                                                          â”‚
â”‚                          â–¼                                                          â”‚
â”‚  Generate Clinical Suggestion:                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚  LLM Input:                                                      â”‚              â”‚
â”‚  â”‚    â€¢ Current case: [Image + Segmentation + Classification]       â”‚              â”‚
â”‚  â”‚    â€¢ Retrieved evidence: [Top-k cases + outcomes]                â”‚              â”‚
â”‚  â”‚    â€¢ Uncertainty score: 0.65                                     â”‚              â”‚
â”‚  â”‚    â€¢ Language: Thai/English                                      â”‚              â”‚
â”‚  â”‚                                                                   â”‚              â”‚
â”‚  â”‚  Prompt Template:                                                â”‚              â”‚
â”‚  â”‚    "Based on {k} similar cases with {evidence_strength}          â”‚              â”‚
â”‚  â”‚     success rate:                                                â”‚              â”‚
â”‚  â”‚     â€¢ Diagnosis: [Disease Name]                                  â”‚              â”‚
â”‚  â”‚     â€¢ Segmentation: [Areas marked]                               â”‚              â”‚
â”‚  â”‚     â€¢ Recommended treatment: [Treatment X]                       â”‚              â”‚
â”‚  â”‚     â€¢ Expected outcome: [Predicted based on evidence]            â”‚              â”‚
â”‚  â”‚     â€¢ Monitoring plan: [Based on similar cases]                  â”‚              â”‚
â”‚  â”‚     â€¢ Confidence: {1 - uncertainty}                              â”‚              â”‚
â”‚  â”‚     â€¢ Evidence: {similar_case_summaries}                         â”‚              â”‚
â”‚  â”‚     {IF uncertainty > 0.7:                                       â”‚              â”‚
â”‚  â”‚        Recommendation: Consult specialist}"                      â”‚              â”‚
â”‚  â”‚                                                                   â”‚              â”‚
â”‚  â”‚  Temperature: 0.3 if uncertain, 0.7 if confident                â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                          â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

<br/>

### âœ¿ Final Output

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŒ¸ FINAL OUTPUT                                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚  1. Disease Classification:                                     â”‚                â”‚
â”‚  â”‚     â€¢ Primary: Oral Lichen Planus (OLP)                         â”‚                â”‚
â”‚  â”‚     â€¢ Confidence: 85%                                            â”‚                â”‚
â”‚  â”‚                                                                  â”‚                â”‚
â”‚  â”‚  2. Segmentation Masks:                                         â”‚                â”‚
â”‚  â”‚     â€¢ Erosive Area 1: [Polygon coordinates] <seg1>             â”‚                â”‚
â”‚  â”‚     â€¢ Erosive Area 2: [Polygon coordinates] <seg2>             â”‚                â”‚
â”‚  â”‚     â€¢ White Striae: [Polygon coordinates] <seg3>               â”‚                â”‚
â”‚  â”‚                                                                  â”‚                â”‚
â”‚  â”‚  3. Clinical Description:                                       â”‚                â”‚
â”‚  â”‚     "Clinical examination reveals bilateral reticular           â”‚                â”‚
â”‚  â”‚      white striae on buccal mucosa with erosive areas..."       â”‚                â”‚
â”‚  â”‚                                                                  â”‚                â”‚
â”‚  â”‚  4. Evidence-Based Recommendation:                              â”‚                â”‚
â”‚  â”‚     "Based on 12 similar cases (80% success rate):              â”‚                â”‚
â”‚  â”‚      â€¢ Treatment: Topical corticosteroids                       â”‚                â”‚
â”‚  â”‚      â€¢ Expected improvement: 4-6 weeks                          â”‚                â”‚
â”‚  â”‚      â€¢ Monitor erosive areas <seg1>, <seg2> monthly             â”‚                â”‚
â”‚  â”‚      â€¢ Biopsy if no improvement in 8 weeks                      â”‚                â”‚
â”‚  â”‚      Evidence: 12/15 similar cases showed improvement"          â”‚                â”‚
â”‚  â”‚                                                                  â”‚                â”‚
â”‚  â”‚  5. Similar Cases References:                                   â”‚                â”‚
â”‚  â”‚     â€¢ Case #234: 85% similarity, Improved after 6 weeks         â”‚                â”‚
â”‚  â”‚     â€¢ Case #567: 82% similarity, Complete healing               â”‚                â”‚
â”‚  â”‚     â€¢ Case #891: 78% similarity, Partial improvement            â”‚                â”‚
â”‚  â”‚                                                                  â”‚                â”‚
â”‚  â”‚  6. Uncertainty & Safety:                                       â”‚                â”‚
â”‚  â”‚     â€¢ Uncertainty Score: 0.35 (Low)                             â”‚                â”‚
â”‚  â”‚     â€¢ Recommendation: Suitable for monitoring                   â”‚                â”‚
â”‚  â”‚     [If high uncertainty: "Consult specialist recommended"]     â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

<br/>

```
      ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸
```

<br/>

<div align="center">

## ğŸŒ¸ User Interface Delivery ğŸŒ¸

</div>

<table align="center">
<tr>
<td align="center" width="50%">

### ğŸŒ¸ Web Interface

</td>
<td align="center" width="50%">

### ğŸŒ¸ LINE API

</td>
</tr>
<tr>
<td>

- ğŸ“¤ Upload image
- âœï¸ Enter instruction (Thai or English)
- ğŸ” View segmentation overlay
- ğŸ“‹ Read detailed report
- ğŸ“š Access similar cases
- ğŸ‘©â€âš•ï¸ Medical professional use

</td>
<td>

- ğŸ“± Send image via LINE chat
- ğŸ’¬ Receive results in chat
- ğŸ—£ï¸ Interactive Q&A
- ğŸ”— Share with healthcare provider
- ğŸ¯ Simple interface for public
- âš¡ Quick screening

</td>
</tr>
</table>

<br/>

```
      ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸ âœ¿ ğŸŒ¸
```

<br/>

<div align="center">

## ğŸŒ¸ Key Innovations ğŸŒ¸

</div>

<table align="center">
<tr>
<td align="center">ğŸŒ¸</td>
<td><strong>Multilingual Support (Thai-English)</strong></td>
</tr>
<tr>
<td></td>
<td>Same model handles both languages with zero-shot cross-lingual transfer capability</td>
</tr>
<tr>
<td align="center">âœ¿</td>
<td><strong>Complex Instruction Understanding (Ground-V adapted)</strong></td>
</tr>
<tr>
<td></td>
<td>Multi-granular, Multi-object, Reasoning, Part-level, Hallucination mitigation</td>
</tr>
<tr>
<td align="center">ğŸŒ¸</td>
<td><strong>Retrieval-Augmented Grounding (ReGrounding) - NOVEL!</strong></td>
</tr>
<tr>
<td></td>
<td>Retrieve visual exemplars + segmentations (not just text), use clinical outcomes as evidence, adaptive retrieval based on uncertainty</td>
</tr>
<tr>
<td align="center">âœ¿</td>
<td><strong>Uncertainty-Aware System</strong></td>
</tr>
<tr>
<td></td>
<td>Model knows when to abstain, recommends specialist consultation when uncertain</td>
</tr>
<tr>
<td align="center">ğŸŒ¸</td>
<td><strong>Evidence-Based Recommendations</strong></td>
</tr>
<tr>
<td></td>
<td>"12/15 similar cases improved with treatment X" - backed by real clinical outcomes</td>
</tr>
</table>

<br/>

---

<div align="center">

```
âœ¿ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” âœ¿
                              ğŸŒ¸ HIKARI Project ğŸŒ¸
                   Healthcare-oriented Intelligent Knowledge-Augmented
                          Retrieval and Inference system
âœ¿ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” âœ¿
```

<sub>Made with ğŸ’— and ğŸŒ¸</sub>

</div>